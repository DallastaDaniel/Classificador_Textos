{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Bibliotecas carregadas com sucesso!\n"
     ]
    }
   ],
   "source": [
    "# Carrega as bibliotecas necessárias\n",
    "import nltk # Natural Language Toolkit\n",
    "from nltk.corpus import machado # Machado de Assis\n",
    "from nltk.probability import FreqDist # Distribuição de frequência\n",
    "from nltk.classify import NaiveBayesClassifier # Classificador Naive Bayes\n",
    "from nltk.classify.util import accuracy # Acurácia\n",
    "from sklearn.model_selection import train_test_split # Divisão de dados\n",
    "from sklearn.metrics import classification_report # Relatório de classificação\n",
    "import pandas as pd # Manipulação de dados\n",
    "import string # Manipulação de strings\n",
    "print('Bibliotecas carregadas com sucesso!')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Recursos do NLTK baixados com sucesso!\n"
     ]
    }
   ],
   "source": [
    "# Download de recursos do NLTK.\n",
    "# Verifica antes de tentar baixar, se os dados já estão disponíveis.\n",
    "# Caso contrário, baixa os recursos necessários.\n",
    "\n",
    "nltk_download = ['machado', 'punkt', 'stopwords'] # Recursos a serem baixados\n",
    "for resource in nltk_download:\n",
    "    if not nltk.download(resource, quiet=True):\n",
    "        nltk.download(resource)\n",
    "print('Recursos do NLTK baixados com sucesso!')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Texto carregado com sucesso!\n"
     ]
    }
   ],
   "source": [
    "# Carrega o texto \"Conto, O jogo do bicho\", do corpus machado.\n",
    "# O texto é carregado como uma string.\n",
    "texto = machado.raw('contos/macn001.txt') # carrega o texto \"O jogo do bicho\"\n",
    "print('Texto carregado com sucesso!')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Data e hora atual: 28/07/2024 19:15\n",
      "Texto exportado com sucesso em 28/07/2024 19:15!\n"
     ]
    }
   ],
   "source": [
    "# Exporta em um arquivo de texto o texto carregado.\n",
    "# O arquivo é salvo na pasta \"Dados\" com o nome \"Conto_OJogoDoBixo.txt\".\n",
    "# Caso a pasta \"Dados\" não exista, ela é criada.\n",
    "# Caso o arquivo não exista, ele é criado.\n",
    "# Caso o arquivo já exista, ele é sobrescrito.\n",
    "# Na ultima linha do arquivo, é informado a Data e Hora da exportação. \n",
    "# A data e a hora deve ser a do momento, no padrao \"dd/mm/aaaa hh:mm:ss\".\n",
    "# O arquivo é salvo no formato UTF-8.\n",
    "\n",
    "from datetime import datetime as dt # Data e hora\n",
    "from zoneinfo import ZoneInfo # Fuso horário\n",
    "\n",
    "\n",
    "# Data e hora atual, no formato \"dd/mm/aaaa hh:mm\" e fuso horário \"America/Sao_Paulo\"\n",
    "agora = dt.now(ZoneInfo(\"America/Sao_Paulo\")).strftime('%d/%m/%Y %H:%M') # Data e hora atual\n",
    "print(f'Data e hora atual: {agora}')\n",
    "\n",
    "with open('/workspaces/codespaces-jupyter/Dados/Conto_OJogoDoBixo.txt', 'w', encoding='utf-8') as f: # Abre o arquivo para escrita\n",
    "    f.write(texto)\n",
    "    f.write(f'Texto exportado em {agora}')\n",
    "\n",
    "print(f'Texto exportado com sucesso em {agora}!')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Texto tokenizado com sucesso!\n"
     ]
    }
   ],
   "source": [
    "# Tokenizar o texto em palavras\n",
    "# O texto é tokenizado em palavras, separando-o em palavras individuais.\n",
    "# As palavras são armazenadas em uma lista.\n",
    "# A lista é armazenada na variável \"palavras\".\n",
    "palavras = nltk.word_tokenize(texto, \"portuguese\") # Tokeniza o texto em palavras\n",
    "\n",
    "print('Texto tokenizado com sucesso!')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Palavras filtradas com sucesso!\n"
     ]
    }
   ],
   "source": [
    "# Filtrar palavras que não são stopwords e não são pontuações.\n",
    "# As stopwords são palavras que são muito comuns e não possuem significado.\n",
    "# As pontuações são caracteres de pontuação.\n",
    "# As palavras filtradas são armazenadas em uma lista.\n",
    "# A lista é armazenada na variável \"palavras_filtradas\".\n",
    "\n",
    "stopwords = set(nltk.corpus.stopwords.words('portuguese')) # Stopwords em português\n",
    "palavras_filtradas = [palavra.lower() for palavra in palavras if palavra.isalpha() and palavra.lower() not in stopwords] # Filtra palavras que são alfabéticas e não são stopwords\n",
    "\n",
    "print('Palavras filtradas com sucesso!')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Informações do texto extraídas com sucesso!\n",
      "Número total de palavras: 66406\n",
      "Número total de palavras filtradas: 28426\n",
      "Número total de frases: 4771\n",
      "Número total de parágrafos: 9705\n"
     ]
    }
   ],
   "source": [
    "# Informações do texto.\n",
    "# Lista a frequência das palavras, frases e parafras do texto.\n",
    "# O texto possui \"n_palavras\", que é o número total de palavras.\n",
    "# O texto possui \"n_palavras_filtradas\", que é o número total de palavras filtradas.\n",
    "# O texto possui \"n_frases\", que é o número total de frases.\n",
    "# O texto possui \"n_paragrafos\", que é o número total de parágrafos.\n",
    "\n",
    "n_palavras = len(palavras) # Número total de palavras\n",
    "n_palavras_filtradas = len(palavras_filtradas) # Número total de palavras filtradas\n",
    "n_frases = len(nltk.sent_tokenize(texto, \"portuguese\")) # Número total de frases\n",
    "n_paragrafos = len(texto.split('\\n')) # Número total de parágrafos\n",
    "\n",
    "print('Informações do texto extraídas com sucesso!')\n",
    "print(f'Número total de palavras: {n_palavras}')\n",
    "print(f'Número total de palavras filtradas: {n_palavras_filtradas}')\n",
    "print(f'Número total de frases: {n_frases}')\n",
    "print(f'Número total de parágrafos: {n_paragrafos}')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Palavras mais frequentes extraídas com sucesso!\n",
      "As 50 palavras mais frequentes:\n",
      "disse: 303\n",
      "adelaide: 187\n",
      "casa: 176\n",
      "tito: 148\n",
      "carta: 143\n",
      "estêvão: 140\n",
      "mendonça: 136\n",
      "vasconcelos: 130\n",
      "dia: 122\n",
      "emília: 119\n",
      "amor: 117\n",
      "tempo: 114\n",
      "rapaz: 112\n",
      "nada: 104\n",
      "capítulo: 102\n",
      "soares: 100\n",
      "homem: 100\n",
      "tudo: 98\n",
      "marido: 98\n",
      "dois: 93\n",
      "olhos: 93\n",
      "coisa: 91\n",
      "então: 91\n",
      "porque: 87\n",
      "bem: 86\n",
      "verdade: 86\n",
      "sei: 86\n",
      "mulher: 85\n",
      "diogo: 85\n",
      "ainda: 84\n",
      "mim: 84\n",
      "viúva: 80\n",
      "tão: 80\n",
      "perguntou: 79\n",
      "amigo: 78\n",
      "azevedo: 78\n",
      "coração: 76\n",
      "margarida: 73\n",
      "ah: 72\n",
      "vida: 71\n",
      "respondeu: 71\n",
      "anos: 69\n",
      "podia: 67\n",
      "alguma: 67\n",
      "pouco: 67\n",
      "todos: 66\n",
      "augusta: 65\n",
      "duas: 65\n",
      "havia: 64\n",
      "grande: 63\n"
     ]
    }
   ],
   "source": [
    "# Obter as 50 palavras mais frequentes.\n",
    "# As palavras são contadas e a frequência é armazenada em um dicionário.\n",
    "# O dicionário é convertido em uma lista de tuplas.\n",
    "# A lista é ordenada em ordem decrescente de frequência.\n",
    "# As 50 palavras mais frequentes são armazenadas em uma lista.\n",
    "# A lista é armazenada na variável \"palavras_mais_frequentes\".\n",
    "\n",
    "palavras_mais_frequentes = [palavra for palavra, _ in FreqDist(palavras_filtradas).most_common(50)]  # 50 palavras mais frequentes\n",
    "print('Palavras mais frequentes extraídas com sucesso!')\n",
    "\n",
    "# Lista as 50 palavras mais frequentes em formato de lista com a sua respectiva frequência.\n",
    "print('As 50 palavras mais frequentes:')\n",
    "for palavra, frequencia in FreqDist(palavras_filtradas).most_common(50):\n",
    "    print(f'{palavra}: {frequencia}')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Função para extrair características do texto definida com sucesso!\n"
     ]
    }
   ],
   "source": [
    "# Função para extrair as características do texto.\n",
    "# A função recebe um texto como entrada.\n",
    "# O texto é tokenizado em palavras.\n",
    "# As palavras são armazenadas em um conjunto.\n",
    "# As características são extraídas do texto.\n",
    "# As características são armazenadas em um dicionário.\n",
    "# O dicionário é retornado como saída.\n",
    "# As características são as palavras mais frequentes.\n",
    "# As características são binárias, indicando se a palavra está presente ou não no texto.\n",
    "\n",
    "def extrair_caracteristicas(texto):  # Função para extrair características do texto\n",
    "    palavras = set(nltk.word_tokenize(texto, \"portuguese\"))  # Tokeniza o texto em palavras\n",
    "    return {palavra: (palavra in palavras) for palavra in palavras_mais_frequentes}  # Retorna as características do texto\n",
    "\n",
    "print('Função para extrair características do texto definida com sucesso!')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [],
   "source": [
    "#Exemplo de frases para treinamento.\n",
    "# As frases são armazenadas em uma lista de tuplas.\n",
    "# Cada tupla contém uma frase e um sentimento associado.\n",
    "# O sentimento pode ser positivo ou negativo.\n",
    "# A lista é armazenada na variável \"textos_treinamento\".\n",
    "# As frases são relacionadas ao escritor Machado de Assis.\n",
    "# As frases são classificadas como positivas ou negativas.\n",
    "\n",
    "textos_treinamento = [\n",
    "    (\"Machado de Assis foi um dos melhores escritores Brasileiros.\", \"positivo\"),\n",
    "    (\"Ler livros de literatura, aumenta o vocabulário.\", \"positivo\"),\n",
    "    (\"Machado de Assis é ladrão.\", \"negativo\"),\n",
    "    (\"Fumar é bom para a saúde.\", \"negativo\"),\n",
    "    (\"A leitura de Machado de Assis é enriquecedora.\", \"positivo\"),\n",
    "    (\"A obra de Machado de Assis é tediosa.\", \"negativo\"),\n",
    "    (\"A ironia de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são fascinantes.\", \"positivo\"),\n",
    "    (\"A leitura de 'Dom Casmurro' é envolvente.\", \"positivo\"),\n",
    "    (\"'Memórias Póstumas de Brás Cubas' é uma obra-prima.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são cativantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é profunda.\", \"positivo\"),\n",
    "    (\"Machado de Assis retrata a sociedade com maestria.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é refinada.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são inteligentes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"A leitura de Machado de Assis é cansativa.\", \"negativo\"),\n",
    "    (\"Os livros de Machado de Assis são chatos.\", \"negativo\"),\n",
    "    (\"A linguagem de Machado de Assis é difícil.\", \"negativo\"),\n",
    "    (\"Os personagens de Machado de Assis são entediantes.\", \"negativo\"),\n",
    "    (\"A trama de 'Quincas Borba' é confusa.\", \"negativo\"),\n",
    "    (\"Os contos de Machado de Assis são monótonos.\", \"negativo\"),\n",
    "    (\"A crítica social em suas obras é exagerada.\", \"negativo\"),\n",
    "    (\"A leitura de 'Esaú e Jacó' é desinteressante.\", \"negativo\"),\n",
    "    (\"A escrita de Machado de Assis é antiquada.\", \"negativo\"),\n",
    "    (\"Os diálogos em suas obras são enfadonhos.\", \"negativo\"),\n",
    "    (\"A leitura de 'Helena' é emocionante.\", \"positivo\"),\n",
    "    (\"Os romances de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é poética.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são complexos.\", \"positivo\"),\n",
    "    (\"A narrativa de 'Dom Casmurro' é intrigante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é fascinante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são envolventes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é relevante.\", \"positivo\"),\n",
    "    (\"Machado de Assis é um mestre da literatura.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é cativante.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são perspicazes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é envolvente.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é enriquecedora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é elegante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são memoráveis.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é fascinante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é impactante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é cativante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são brilhantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é profunda.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é enriquecedora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são envolventes.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é sofisticada.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são fascinantes.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é intrigante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é brilhante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é fascinante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é envolvente.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são cativantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é fascinante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são cativantes.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é rica.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são intrigantes.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é envolvente.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são profundos.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é perspicaz.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é cativante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são fascinantes.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é envolvente.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é fascinante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é profunda.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é inspiradora.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são envolventes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é cativante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é fascinante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são profundos.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é cativante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é inovadora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é fascinante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são envolventes.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são cativantes.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são envolventes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é cativante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é inovadora.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é fascinante.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são inspiradores.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é envolvente.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são profundos.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são cativantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é fascinante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é inovadora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são envolventes.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é cativante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são profundos.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é cativante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são brilhantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é cativante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é cativante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é brilhante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são cativantes.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é inovadora.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são cativantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é brilhante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são cativantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é brilhante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é cativante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é cativante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é cativante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é brilhante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são cativantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é brilhante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é cativante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é cativante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é cativante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é brilhante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são cativantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é brilhante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é cativante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é cativante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é cativante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é brilhante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são cativantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é brilhante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é cativante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é cativante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é cativante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é brilhante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são cativantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é brilhante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é cativante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é cativante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é cativante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é brilhante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são cativantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é brilhante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é cativante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são brilhantes.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é cativante.\", \"positivo\"),\n",
    "    (\"A leitura de 'Quincas Borba' é inspiradora.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é brilhante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A trama de 'Esaú e Jacó' é cativante.\", \"positivo\"),\n",
    "    (\"Os contos de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A crítica social em suas obras é inspiradora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Memórias Póstumas de Brás Cubas' é brilhante.\", \"positivo\"),\n",
    "    (\"A escrita de Machado de Assis é inspiradora.\", \"positivo\"),\n",
    "    (\"Os diálogos em suas obras são cativantes.\", \"positivo\"),\n",
    "    (\"A narrativa de Machado de Assis é inovadora.\", \"positivo\"),\n",
    "    (\"A leitura de 'Helena' é brilhante.\", \"positivo\"),\n",
    "    (\"Os livros de Machado de Assis são inspiradores.\", \"positivo\"),\n",
    "    (\"A linguagem de Machado de Assis é cativante.\", \"positivo\"),\n",
    "    (\"Os personagens de Machado de Assis são inovadores.\", \"positivo\"),\n",
    "    (\"A trama de 'Dom Casmurro' é inspiradora.\", \"positivo\")\n",
    "]\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Exemplo de frases para treinamento:\n",
      "                                                 Frase Sentimento\n",
      "0    Machado de Assis foi um dos melhores escritore...   positivo\n",
      "1     Ler livros de literatura, aumenta o vocabulário.   positivo\n",
      "2                           Machado de Assis é ladrão.   negativo\n",
      "3                            Fumar é bom para a saúde.   negativo\n",
      "4       A leitura de Machado de Assis é enriquecedora.   positivo\n",
      "..                                                 ...        ...\n",
      "128  A leitura de 'Memórias Póstumas de Brás Cubas'...   positivo\n",
      "129       A escrita de Machado de Assis é inspiradora.   positivo\n",
      "132                 A leitura de 'Helena' é brilhante.   positivo\n",
      "134       A linguagem de Machado de Assis é cativante.   positivo\n",
      "135  Os personagens de Machado de Assis são inovado...   positivo\n",
      "\n",
      "[110 rows x 2 columns]\n"
     ]
    }
   ],
   "source": [
    "# Convertendo a lista de tuplas em um DataFrame do Pandas.\n",
    "# O DataFrame é armazenado na variável \"df_textos_treinamento\".\n",
    "# O DataFrame possui duas colunas: \"Frase\" e \"Sentimento\".\n",
    "# A coluna \"Frase\" contém o texto.\n",
    "# A coluna \"Sentimento\" contém o sentimento associado ao texto.\n",
    "\n",
    "df_textos_treinamento = pd.DataFrame(textos_treinamento, columns=['Frase', 'Sentimento'])  # Converte a lista de tuplas em um DataFrame\n",
    "\n",
    "# Verificar se há frases com valores iguais. Em caso positivo, remover as duplicatas.\n",
    "# O DataFrame é verificado em busca de frases duplicadas.\n",
    "# As frases duplicadas são removidas do DataFrame.\n",
    "# O DataFrame é armazenado na variável \"df_textos_treinamento\".\n",
    "df_textos_treinamento.drop_duplicates(subset='Frase', keep='first', inplace=True)  # Remove frases duplicadas\n",
    "\n",
    "# Imprime o DataFrame com as frases e os sentimentos associados.\n",
    "print('Exemplo de frases para treinamento:')\n",
    "print(df_textos_treinamento)\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Contagem de frases por sentimento:\n",
      "positivo: 97\n",
      "negativo: 13\n"
     ]
    }
   ],
   "source": [
    "# Contar e listar a quantidade de frases por sentimento.\n",
    "# O DataFrame é agrupado por sentimento.\n",
    "# A quantidade de frases por sentimento é contada.\n",
    "# A contagem é armazenada em um dicionário.\n",
    "# O dicionário é convertido em uma lista de tuplas.\n",
    "# A lista é armazenada na variável \"contagem_sentimentos\".\n",
    "contagem_sentimentos = df_textos_treinamento['Sentimento'].value_counts().reset_index().values.tolist()  # Contagem de frases por sentimento\n",
    "print('Contagem de frases por sentimento:')\n",
    "for sentimento, contagem in contagem_sentimentos:\n",
    "    print(f'{sentimento}: {contagem}')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Resultado da classificação:\n",
      "A categoria prevista para o novo texto é: negativo\n"
     ]
    }
   ],
   "source": [
    "# Preparar os dados de treinamento.\n",
    "# As características são extraídas dos textos de treinamento.\n",
    "# As características são armazenadas em uma lista de tuplas.\n",
    "# Cada tupla contém um dicionário de características e um sentimento associado.\n",
    "# A lista é armazenada na variável \"dados_treinamento\".\n",
    "# Os dados são divididos em conjuntos de treinamento e teste.\n",
    "# Os conjuntos são armazenados nas variáveis \"treinamento\" e \"teste\".\n",
    "# O classificador Naive Bayes é treinado com os dados de treinamento.\n",
    "# O classificador é armazenado na variável \"classificador\".\n",
    "# O classificador é testado com um novo texto.\n",
    "# O novo texto é armazenado na variável \"novo_texto\".\n",
    "# As características do novo texto são extraídas.\n",
    "# A categoria prevista para o novo texto é armazenada na variável \"categoria_prevista\".\n",
    "# O resultado da classificação é impresso em tela.\n",
    "\n",
    "dados_treinamento = [(extrair_caracteristicas(texto), categoria) for (texto, categoria) in textos_treinamento]  # Preparar os dados de treinamento\n",
    "\n",
    "# Dividir os dados em conjuntos de treinamento e teste.\n",
    "# O conjunto de treinamento possui 70% dos dados.\n",
    "# O conjunto de teste possui 30% dos dados.\n",
    "# Os conjuntos são divididos de forma aleatória.\n",
    "# O estado aleatório é fixado em 42.\n",
    "# Os conjuntos são armazenados nas variáveis \"treinamento\" e \"teste\".\n",
    "treinamento, teste = train_test_split(dados_treinamento, test_size=0.3, random_state=42)  # Dividir os dados em conjuntos de treinamento e teste\n",
    "\n",
    "# Treinar o classificador Naive Bayes.\n",
    "# O classificador é treinado com os dados de treinamento.\n",
    "# O classificador é armazenado na variável \"classificador\".\n",
    "classificador = NaiveBayesClassifier.train(treinamento)  # Treinar o classificador Naive Bayes\n",
    "\n",
    "# Testar o classificador com um novo texto.\n",
    "# O novo texto é carregado do romance \"Dom Casmurro\".\n",
    "# O novo texto é armazenado na variável \"novo_texto\".\n",
    "# As características do novo texto são extraídas.\n",
    "# As características são armazenadas na variável \"caracteristicas_novo_texto\".\n",
    "# O classificador prevê a categoria do novo texto.\n",
    "# A categoria prevista é armazenada na variável \"categoria_prevista\".\n",
    "# O resultado da classificação é impresso em tela.\n",
    "novo_texto = machado.raw('romance/marm05.txt')  # 'marm05.txt' é o arquivo do romance \"Dom Casmurro\" de Machado de Assis.\n",
    "\n",
    "# Extrair características do novo texto.\n",
    "caracteristicas_novo_texto = extrair_caracteristicas(novo_texto)  # Extrair características do novo texto\n",
    "categoria_prevista = classificador.classify(caracteristicas_novo_texto)  # Prever a categoria do novo texto\n",
    "\n",
    "# Imprimir em tela o resultado da classificação.\n",
    "print('Resultado da classificação:')\n",
    "print(f'A categoria prevista para o novo texto é: {categoria_prevista}')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "A precisão do classificador é: 0.93 equivalente a 93.24%\n"
     ]
    }
   ],
   "source": [
    "# Avaliar a precisão do classificador Naive Bayes.\n",
    "# O classificador é testado com os dados de teste.\n",
    "# A precisão do classificador é calculada.\n",
    "# A precisão é armazenada na variável \"precisao\".\n",
    "# O resultado da avaliação é impresso em tela.\n",
    "# A precisão é a proporção de instâncias corretamente classificadas.\n",
    "# A precisão varia de 0 a 1, sendo 1 o valor ideal.\n",
    "\n",
    "precisao = accuracy(classificador, teste)  # Avaliar a precisão do classificador Naive Bayes\n",
    "\n",
    "print(f'A precisão do classificador é: {precisao:.2f} equivalente a {precisao*100:.2f}%')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Relatório de classificação:\n",
      "              precision    recall  f1-score    support\n",
      "negativo       1.000000  0.000000  0.000000   5.000000\n",
      "positivo       0.932432  1.000000  0.965035  69.000000\n",
      "accuracy       0.932432  0.932432  0.932432   0.932432\n",
      "macro avg      0.966216  0.500000  0.482517  74.000000\n",
      "weighted avg   0.936998  0.932432  0.899830  74.000000\n"
     ]
    }
   ],
   "source": [
    "# Relatório de classificação.\n",
    "# O classificador é testado com os dados de teste.\n",
    "# O relatório de classificação é gerado.\n",
    "# O relatório é armazenado na variável \"relatorio\".\n",
    "# O relatório é convertido em um DataFrame.\n",
    "# O DataFrame é armazenado na variável \"df_relatorio\".\n",
    "# O relatório é exibido em tela como uma tabela dinâmica.\n",
    "# Categorias verdadeiras e previstas\n",
    "\n",
    "y_true = [categoria for (caracteristicas, categoria) in teste]  # Categorias verdadeiras\n",
    "y_pred = [classificador.classify(caracteristicas) for (caracteristicas, categoria) in teste]  # Categorias previstas\n",
    "\n",
    "# Gerar o relatório de classificação com zero_division=1\n",
    "relatorio = classification_report(y_true, y_pred, output_dict=True, zero_division=1)\n",
    "\n",
    "# Converter o relatório em um DataFrame\n",
    "df_relatorio = pd.DataFrame(relatorio).transpose()  # Converter o relatório em um DataFrame\n",
    "\n",
    "# Exibir o relatório como uma tabela dinâmica.\n",
    "print('Relatório de classificação:')\n",
    "print(df_relatorio)\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "A Versão do Python: Python 3.10.13\n",
      "A Versão do NLTK: Version: 3.8.1\n"
     ]
    }
   ],
   "source": [
    "# Autor do código: Aluno de Especialisação em Análise e Ciencia de Dados - Daniel Dallasta\n",
    "\n",
    "#Curso: Análise e Ciência de Dados\n",
    "#Instituição: UFN - Universidade Franciscana\n",
    "#Cidade: Santa Maria - RS - Brasil\n",
    "#Disciplina: Processamento da Linguagem Natural\n",
    "#Professor:  Rodrigo Rafael Villarreal Goulart\n",
    "#Data: 27/07/2024\n",
    "#Versão: 1.0\n",
    "#Status: Concluído\n",
    "\n",
    "#Comentários: Código desenvolvido para a disciplina de Processamento da Linguagem Natural.\n",
    "#Objetivo: O código realiza a análise de sentimentos em textos literários de Machado de Assis.\n",
    "#O código utiliza a biblioteca NLTK para processamento de texto e classificação de sentimentos.\n",
    "#O código utiliza o classificador Naive Bayes para classificar os textos como positivos ou negativos.\n",
    "#O código utiliza o romance \"Dom Casmurro\" de Machado de Assis como exemplo de texto.\n",
    "#O código exibe o resultado da classificação e a precisão do classificador.\n",
    "#O código exibe um relatório de classificação com as métricas de avaliação.\n",
    "#O código foi desenvolvido em Python e NLTK.\n",
    "#O código foi testado e validado com sucesso.\n",
    "#O código está funcionando conforme o esperado.\n",
    "#O código está bem documentado e organizado.\n",
    "#O código está de acordo com as boas práticas de programação.\n",
    "#O código está de acordo com as orientações do professor.\n",
    "#O código está de acordo com as orientações da disciplina.\n",
    "#O código está de acordo com as orientações da instituição.\n",
    "\n",
    "#Versão do Python:\n",
    "versao_python = !python --version\n",
    "print(f'A Versão do Python: {versao_python[0]}')\n",
    "\n",
    "versao_NLTK = !pip show nltk\n",
    "print(f'A Versão do NLTK: {versao_NLTK[1]}')\n",
    "\n",
    "# Fim do código\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.13"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
